                                                CamStyle Mobile App Backend Documentation


MVC structure:


ecommerce-backend/
│
├── server.js                 # Main entry point
├── package.json
├── .env                      # All sensitive keys (JWT, MongoDB, Bank API)
│
├── config/
│   ├── db.js                 # MongoDB Atlas connection
│   └── bank.config.js        # Bank merchant credentials & endpoints
|   └── cloudinary.config.js  # Cloudinary credentials and setup
│
├── models/
│   ├── user.model.js         # User schema (name, email, password, role)
│   ├── product.model.js      # Product schema (title, price, stock, category)
│   ├── category.model.js     # Category schema (name, description)
│   ├── cart.model.js         # Cart schema (user, items[])
│   ├── order.model.js        # Order schema (user, products[], status, total)
│   └── transaction.model.js  # Transaction schema (orderId, bankResponse, status)
│
├── controllers/
│   ├── auth.controller.js        # Register, Login, Logout
│   ├── user.controller.js        # Profile, update user info
│   ├── product.controller.js     # CRUD product (admin), get products
│   ├── category.controller.js    # CRUD category (admin)
│   ├── cart.controller.js        # Add/remove items, view cart
│   ├── order.controller.js       # Place order, get orders
│   └── payment.controller.js     # Create payment request, handle bank callbacks
│
├── routes/
│   ├── auth.routes.js
│   ├── user.routes.js
│   ├── product.routes.js
│   ├── category.routes.js
│   ├── cart.routes.js
│   ├── order.routes.js
│   └── payment.routes.js
│
├── services/
│   ├── bankPayment.service.js    # Calls bank API, signature verification
│   ├── order.service.js          # Calculates totals, updates order safely
│   └── email.service.js          # Optional: send email notifications
|   └── cloudinary.service.js     # Handle image uploads to Cloudinary
│
├── middlewares/
│   ├── auth.middleware.js        # JWT verification
│   ├── role.middleware.js        # Admin / User role checks
│   ├── error.middleware.js       # Centralized error handling
│   └── validation.middleware.js  # Request body validation
│
├── utils/
│   ├── generateToken.js          # JWT token generation
│   ├── crypto.utils.js           # HMAC/SHA256 for bank signature
│   └── responseHandler.js        # Standardize API responses
│
│
├── logs/                          # Server and transaction logs

Dependencies:
# npm install axios@^1.6.4 bcryptjs@^2.4.3 cloudinary@^2.9.0 cors@^2.8.5 dotenv@^16.3.1 express@^4.18.2 express-rate-limit@^7.0.1 express-validator@^7.0.1 helmet@^7.1.2 jsonwebtoken@^9.0.3 mongoose@^7.5.1 morgan@^1.10.0 multer@^1.4.5-lts.2 winston@^3.10.0 winston-daily-rotate-file@^4.7.1
